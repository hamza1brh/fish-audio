# Fish Speech - Locked Requirements for SageMaker
#
# These versions are tested to work together without conflicts.
#
# INSTALL ORDER MATTERS! Use the install script, or:
#   1. pip install torch==2.2.2 torchvision==0.17.2 torchaudio==2.2.2 --index-url https://download.pytorch.org/whl/cu121
#   2. pip install -r requirements_locked.txt
#   3. pip install -e . --no-deps
#
# Last tested: January 2026

# =============================================================================
# CORE (install first)
# =============================================================================
numpy==1.26.4

# =============================================================================
# TRANSFORMERS STACK (specific versions to avoid conflicts)
# =============================================================================
transformers==4.45.2
tokenizers==0.20.3
safetensors==0.4.5
accelerate==1.1.1
datasets==2.18.0
huggingface-hub==0.26.2

# =============================================================================
# TENSOR OPERATIONS (order: einops THEN einx)
# =============================================================================
einops==0.8.0
einx==0.2.2

# =============================================================================
# AUDIO PROCESSING
# =============================================================================
librosa==0.10.2
soundfile==0.12.1
resampy==0.4.3
pydub==0.25.1
audioread==3.0.1
silero-vad==5.1.2

# =============================================================================
# DESCRIPT AUDIO CODEC (vocoder)
# =============================================================================
descript-audio-codec==1.0.0
descript-audiotools==0.7.2

# =============================================================================
# DEEP LEARNING FRAMEWORK
# =============================================================================
lightning==2.4.0
pytorch-lightning==2.4.0
tensorboard==2.18.0

# =============================================================================
# CONFIG & UTILS
# =============================================================================
hydra-core==1.3.2
omegaconf==2.3.0
pydantic==2.9.2
loguru==0.7.2
rich==13.9.4
pyrootutils==1.0.4
natsort==8.4.0

# =============================================================================
# SERIALIZATION & CACHING
# =============================================================================
cachetools==5.5.0
ormsgpack==1.5.0
zstandard==0.23.0
tiktoken==0.8.0

# =============================================================================
# WEB & API
# =============================================================================
fastapi==0.115.5
uvicorn==0.32.1
gradio==5.6.0
kui==1.6.4
httpx==0.27.2
requests==2.32.3
grpcio==1.68.1

# =============================================================================
# MODEL SUPPORT
# =============================================================================
loralib==0.1.2
wandb==0.18.7

# =============================================================================
# OPTIONAL (may fail, that's OK)
# =============================================================================
# opencc-python-reimplemented==0.1.7
# modelscope==1.17.1
